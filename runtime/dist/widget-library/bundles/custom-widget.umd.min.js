!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common/http"),require("@angular/core"),require("echarts"),require("echarts-simple-transform"),require("@c8y/client"),require("@c8y/ngx-components"),require("ngx-echarts"),require("angular-resize-event")):"function"==typeof define&&define.amd?define("smart-echart-runtime-widget",["exports","@angular/common/http","@angular/core","echarts","echarts-simple-transform","@c8y/client","@c8y/ngx-components","ngx-echarts","angular-resize-event"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self)["smart-echart-runtime-widget"]={},e.ng.common.http,e.ng.core,e.echarts,e.simpleTransform,e.client,e["@c8y/ngx-components"],e.ngxEcharts,e.angularResizeEvent)}(this,(function(e,t,i,a,o,r,n,s,l){"use strict";function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(i){if("default"!==i){var a=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:function(){return e[i]}})}})),t.default=e,Object.freeze(t)}var d=c(t),p=c(i),h=c(a),g=c(o),m=function(){function e(e){this.http=e}return e.prototype.getAPIData=function(e){return this.http.get(e)},e}();m.ɵprov=p.ɵɵdefineInjectable({factory:function(){return new m(p.ɵɵinject(d.HttpClient))},token:m,providedIn:"root"}),m.decorators=[{type:i.Injectable,args:[{providedIn:"root"}]}],m.ctorParameters=function(){return[{type:t.HttpClient}]};function u(e,t,i,a){return new(i||(i=Promise))((function(o,r){function n(e){try{l(a.next(e))}catch(e){r(e)}}function s(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,s)}l((a=a.apply(e,t||[])).next())}))}function f(e,t){var i,a,o,r,n={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;n;)try{if(i=1,a&&(o=2&r[0]?a.return:r[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,r[1])).done)return o;switch(a=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,a=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if(!(o=n.trys,(o=o.length>0&&o[o.length-1])||6!==r[0]&&2!==r[0])){n=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){n.label=r[1];break}if(6===r[0]&&n.label<o[1]){n.label=o[1],o=r;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(r);break}o[2]&&n.ops.pop(),n.trys.pop();continue}r=t.call(e,n)}catch(e){r=[6,e],a=0}finally{i=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}}Object.create;function y(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],a=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&a>=e.length&&(e=void 0),{value:e&&e[a++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var a,o,r=i.call(e),n=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)n.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}function v(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(x(arguments[t]));return e}Object.create;function b(e,t){var i,a,o,r=Array.isArray(e)?e:[e],n=[];try{for(var s=y(r),l=s.next();!l.done;l=s.next()){var c=l.value.split("."),d=t;if(1===c.length)n.push(d[c[0]]);else{for(var p=void 0,h=0;h<c.length;h++){p=d[c[h]],o=p,"[object Object]"===Object.prototype.toString.call(o)?d=p:c.length}n.push(p)}}}catch(e){i={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return r.length>1?n.join(" "):n[0]}var A=function(){function e(e,t){this.chartService=e,this.fetchClient=t,this.chartOption={},this.allSubscriptions=[],this.realtime=!0,this.deviceId="",this.isDatahubPostCall=!1}return e.prototype.ngOnInit=function(){this.chartDiv=this.mapDivRef.nativeElement,this.createChart(this.config)},e.prototype.dataFromUser=function(e){this.createChart(e)},e.prototype.reloadData=function(e){this.createChart(e)},e.prototype.createChart=function(e){return u(this,void 0,void 0,(function(){var t,a,o,r,n,s,l,c,d,p,m,u,y,x,A,D,S,C;return f(this,(function(f){switch(f.label){case 0:return this.dataChart=h.init(this.chartDiv),this.dataChart.showLoading(),e.colors?this.colorsForChart=v(e.colors.split(",")):(i.isDevMode()&&console.log("No colors Specified"),this.colorsForChart=[]),e.showApiInput?(t=this,[4,this.chartService.getAPIData(e.apiUrl).toPromise()]):[3,2];case 1:return t.serviceData=f.sent(),[3,6];case 2:return e.showDatahubInput?(a={sql:e.sqlQuery,limit:e.sqlLimit,format:"PANDAS"},[4,this.fetchClient.fetch(e.datahubUrl,{body:JSON.stringify(a),method:"POST"})]):[3,5];case 3:return o=f.sent(),r=this,[4,o.json()];case 4:return r.serviceData=f.sent(),this.isDatahubPostCall=!0,[3,6];case 5:i.isDevMode()&&console.log("No Datasource selected"),f.label=6;case 6:if(this.serviceData)if(this.dataChart.hideLoading(),n=0,n=0===e.fontSize||""===e.fontSize||null===e.fontSize||void 0===e.fontSize?12:e.fontSize,!0===e.area?null==e.areaOpacity?e.area={}:e.area={opacity:e.areaOpacity}:e.area=null,0!==e.aggrList.length||this.isDatahubPostCall)if(0===e.aggrList.length&&this.isDatahubPostCall){if(m=this.getResultDimesions(e.aggrList,e.groupBy),u=[],y=void 0,x=null,this.serviceData=v([this.serviceData.columns],this.serviceData.data),"bar"===e.type||"line"===e.type)u=this.getDatasetDimensions(e),S=void 0,C=void 0,D="",A="",1===e.yAxisDimension.split(",").length?(S=e.yAxisDimension,u.push(S),D=this.getFormattedName(e.yAxisDimension)):(S=e.yAxisDimension.split(","),u=v(u,S),D=""),1===e.xAxisDimension.split(",").length?(C=e.xAxisDimension,u.push(C),A=this.getFormattedName(e.xAxisDimension)):(C=e.xAxisDimension.split(","),u=v(u,C),A=""),-1===u.indexOf(e.groupBy)&&u.push(e.groupBy),y=this.getEncodeData(e,x,C,S),this.chartOption={dataset:[{id:"raw_data",source:this.serviceData}],tooltip:{trigger:"axis",axisPointer:{type:"cross"},confine:!0},xAxis:{name:e.xAxisDimension,nameLocation:"middle",nameGap:30,scale:!0,type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{type:this.getYAxisType(e),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},dataZoom:this.showZoomFeature(e.sliderZoom),toolbox:{feature:{dataZoom:{show:!0},saveAsImage:{},restore:{}}},series:y},i.isDevMode()&&console.log("Bar or Line chart for Datahub without aggregation",this.chartOption);else if("scatter"===e.type)-1===(u=this.getDatasetDimensions(e)).indexOf(e.groupBy)&&u.push(e.groupBy),A="",D="",A=e.xAxisDimension.split(",").length>1?"":this.getFormattedName(e.xAxisDimension),D=e.yAxisDimension.split(",").length>1?"":this.getFormattedName(e.yAxisDimension),y=this.getEncodeData(e,x),this.chartOption={dataset:[{id:"raw_data",source:this.serviceData}],grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},xAxis:{name:A,nameLocation:"middle",nameGap:50,type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{name:D,nameLocation:"middle",nameGap:70,type:this.getYAxisType(e),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},confine:!0},dataZoom:this.showZoomFeature(e.sliderZoom),toolbox:{feature:{dataZoom:{show:!0,yAxisIndex:"none"},restore:{},saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Scatter chart without Aggregation for Datahub",this.chartOption);else if("pie"===e.type)u=[e.pieSlicenName,e.pieSliceValue],y=this.getEncodeData(e,x),this.chartOption={dataset:[{id:"raw_data",source:this.serviceData}],tooltip:{trigger:"item",confine:!0},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{icon:e.legend.icon,width:330,left:"left",type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},toolbox:{feature:{saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Pie chart without Aggregation for Datahub",this.chartOption),console.log("Pie chart without Aggregation for Datahub",this.chartOption);else if("polar"===e.type)S=void 0,C=void 0,1===e.yAxisDimension.split(",").length?(S=e.yAxisDimension,u.push(S)):(S=e.yAxisDimension.split(","),u=v(u,S)),1===e.xAxisDimension.split(",").length?(C=e.xAxisDimension,u.push(C)):(C=e.xAxisDimension.split(","),u=v(u,C)),-1===u.indexOf(e.groupBy)&&u.push(e.groupBy),y=this.getEncodeData(e,x,C,S),this.chartOption={dataset:[{id:"raw_data",source:this.serviceData}],tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},angleAxis:{type:"value",startAngle:0},radiusAxis:{min:0},polar:{},legend:{icon:e.legend.icon,width:330,left:"left",type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},toolbox:{feature:{saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Polar chart without Aggregation for Datahub",this.chartOption);else if("radar"===e.type){for(u=v(e.radarDimensions),this.seriesData=this.getRadarSeriesData(e),c=this.serviceData[0].indexOf(e.xAxisDimension),d=[],p=1;p<this.serviceData.length;p++)d.push({name:this.serviceData[p][c]});this.chartOption={legend:{icon:e.legend.icon,width:330,left:"left",type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},tooltip:{trigger:"item"},radar:{indicator:d,radius:e.radarChartRadius},series:this.seriesData,toolbox:{feature:{saveAsImage:{}}}},i.isDevMode()&&console.log("Radar Chart without Aggregation for Datahub",this.chartOption),console.log("Radar Chart without Aggregation for Datahub",this.chartOption)}}else e.aggrList.length>0&&(h.registerTransform(g.aggregate),m=this.getResultDimesions(e.aggrList,e.groupBy),u=[],y=void 0,x="_aggregate",this.isDatahubPostCall?this.serviceData=v([this.serviceData.columns],this.serviceData.data):this.serviceData=this.serviceData[e.listName],"bar"===e.type||"line"===e.type?(S=void 0,C=void 0,A="",D="",this.isDatahubPostCall?u=null:(1===e.yAxisDimension.split(",").length?(S=e.yAxisDimension,u.push(S),D=this.getFormattedName(e.yAxisDimension)):(S=e.yAxisDimension.split(","),u=v(u,S),D=""),1===e.xAxisDimension.split(",").length?(C=e.xAxisDimension,u.push(C),A=this.getFormattedName(e.xAxisDimension)):(C=e.xAxisDimension.split(","),u=v(u,C),A=""),-1===u.indexOf(e.groupBy)&&u.push(e.groupBy)),y=this.getEncodeData(e,x,C,S),this.chartOption={dataset:[{id:"raw_data",dimensions:u,source:this.serviceData},{id:"_aggregate",fromDatasetId:"raw_data",transform:[{type:"ecSimpleTransform:aggregate",config:{resultDimensions:m,groupBy:e.groupBy},print:!0}]}],tooltip:{trigger:"axis",axisPointer:{type:"cross"},confine:!0},xAxis:{name:A,nameLocation:"middle",nameGap:30,scale:!0,type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{type:this.getYAxisType(e),name:D,axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},dataZoom:this.showZoomFeature(e.sliderZoom),toolbox:{feature:{dataZoom:{show:!0},saveAsImage:{},restore:{}}},series:y},i.isDevMode()&&console.log("Aggregate Bar or Line chart",this.chartOption)):"scatter"===e.type?(this.isDatahubPostCall?u=null:-1===(u=this.getDatasetDimensions(e)).indexOf(e.groupBy)&&u.push(e.groupBy),A="",D="",A=e.xAxisDimension.split(",").length>1?"":this.getFormattedName(e.xAxisDimension),D=e.yAxisDimension.split(",").length>1?"":this.getFormattedName(e.yAxisDimension),y=this.getEncodeData(e,x),this.chartOption={dataset:[{id:"raw_data",dimensions:u,source:this.serviceData},{id:"_aggregate",fromDatasetId:"raw_data",transform:[{type:"ecSimpleTransform:aggregate",config:{resultDimensions:m,groupBy:e.groupBy},print:!0}]}],grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},xAxis:{name:A,nameLocation:"middle",nameGap:50,type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{name:D,nameLocation:"middle",nameGap:70,type:this.getYAxisType(e),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},dataZoom:this.showZoomFeature(e.sliderZoom),toolbox:{feature:{dataZoom:{show:!0,yAxisIndex:"none"},restore:{},saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Aggregate Scatter chart",this.chartOption)):"pie"===e.type?(u=this.isDatahubPostCall?null:[e.pieSlicenName,e.pieSliceValue],y=this.getEncodeData(e,x),this.chartOption={dataset:[{id:"raw_data",dimensions:u,source:this.serviceData},{id:"_aggregate",fromDatasetId:"raw_data",transform:[{type:"ecSimpleTransform:aggregate",config:{resultDimensions:m,groupBy:e.groupBy},print:!0}]}],tooltip:{trigger:"item",confine:!0},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{selected:{detail:!1},type:"scroll",icon:e.legend.icon,left:"left",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},toolbox:{feature:{saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Aggregate Pie chart",this.chartOption),console.log("Aggregate Pie chart",this.chartOption)):"polar"===e.type&&(S=void 0,C=void 0,this.isDatahubPostCall?u=null:(1===e.yAxisDimension.split(",").length?(S=e.yAxisDimension,u.push(S)):(S=e.yAxisDimension.split(","),u=v(u,S)),1===e.xAxisDimension.split(",").length?(C=e.xAxisDimension,u.push(C)):(C=e.xAxisDimension.split(","),u=v(u,C)),-1===u.indexOf(e.groupBy)&&u.push(e.groupBy)),y=this.getEncodeData(e,x,C,S),this.chartOption={dataset:[{id:"raw_data",dimensions:u,source:this.serviceData},{id:"_aggregate",fromDatasetId:"raw_data",transform:[{type:"ecSimpleTransform:aggregate",config:{resultDimensions:m,groupBy:e.groupBy},print:!0}]}],tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},angleAxis:{type:"value",startAngle:0},radiusAxis:{min:0},polar:{},legend:{selected:{detail:!1},type:"scroll",icon:e.legend.icon,left:"left",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},toolbox:{feature:{saveAsImage:{}}},series:y},i.isDevMode()&&console.log("Aggregate Polar chart",this.chartOption)));else"pie"===e.type?(this.seriesData=this.getPieChartSeriesData(e),this.chartOption={legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},xAxis:{show:!1,boundaryGap:!1,data:this.serviceData[e.listName].map((function(t){return t[e.xAxisDimension]}))},yAxis:{type:"value"},tooltip:{trigger:"item"},series:this.seriesData,toolbox:{feature:{saveAsImage:{}}}},i.isDevMode()&&console.log("Pie Chart For API",this.chartOption),console.log("Pie Chart For API",this.chartOption)):"polar"===e.type?(this.seriesData=this.getPolarChartSeriesData(e),this.chartOption={legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},polar:{},tooltip:{trigger:"axis",axisPointer:{type:"cross"},confine:!0},angleAxis:{type:"value",startAngle:0},radiusAxis:{min:0},series:this.seriesData,toolbox:{feature:{saveAsImage:{}}}},i.isDevMode()&&console.log("Polar Chart For API",this.chartOption)):"scatter"===e.type?(s=void 0,l=void 0,"horizontalScatter"===e.layout?(s={name:this.getFormattedName(e.xAxisDimension),nameLocation:"middle",nameGap:30,type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},l={name:this.getFormattedName(e.yAxisDimension),nameLocation:"middle",nameGap:70,data:this.serviceData[e.listName].map((function(t){return t[e.yAxisDimension]})),type:this.getYAxisType(e),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}}):(s={name:this.getFormattedName(e.xAxisDimension),nameLocation:"middle",nameGap:30,data:this.serviceData[e.listName].map((function(t){return t[e.xAxisDimension]})),type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{fontSize:n,rotate:e.xAxisRotateLabels}},l={name:this.getFormattedName(e.yAxisDimension),nameLocation:"middle",nameGap:70,type:this.getYAxisType(e),axisLabel:{fontSize:n,rotate:e.yAxisRotateLabels}}),this.seriesData=this.getScatterChartSeriesData(e),this.chartOption={grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},xAxis:s,yAxis:l,tooltip:{trigger:"axis",axisPointer:{type:"cross"}},toolbox:{feature:{dataZoom:{show:e.boxZoom,yAxisIndex:"none"},restore:{},saveAsImage:{}}},legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},dataZoom:this.showZoomFeature(e.sliderZoom),series:this.seriesData},i.isDevMode()&&console.log("Scatter chart for API",this.chartOption)):"radar"===e.type?(this.seriesData=this.getRadarSeriesData(e),this.chartOption={legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},tooltip:{trigger:"item",confine:!0},grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},radar:{indicator:this.serviceData[e.listName].map((function(t){return{name:t[e.xAxisDimension]}})),radius:e.radarChartRadius},series:this.seriesData,toolbox:{feature:{saveAsImage:{}}}},i.isDevMode()&&console.log("Radar chart for API",this.chartOption),console.log("Radar chart for API",this.chartOption)):"line"!==e.type&&"bar"!==e.type||"simpleHorizontalBar"===e.layout||"stackedHorizontalBar"===e.layout?"bar"!==e.type||"simpleHorizontalBar"!==e.layout&&"stackedHorizontalBar"!==e.layout||(A=void 0,D=void 0,A=e.xAxisDimension.split(",").length>1?"":this.getFormattedName(e.xAxisDimension),D=e.yAxisDimension.split(",").length>1?"":this.getFormattedName(e.yAxisDimension),this.seriesData=this.getHorizontalSeriesData(e),this.chartOption={grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},legend:{show:!0,icon:e.legend.icon,orient:"horizontal",formatter:function(e){return e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))},type:"scroll"},dataZoom:this.showZoomFeature(e.sliderZoom),xAxis:{type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{type:this.getYAxisType(e),data:this.serviceData[e.listName].map((function(t){return b(e.yAxisDimension,t)})),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},series:this.seriesData,toolbox:{feature:{dataZoom:{show:!0,yAxisIndex:"none"},restore:{},saveAsImage:{}}}},i.isDevMode()&&console.log("Horizontal chart for API",this.chartOption)):(this.seriesData=this.getSeriesData(e),A=void 0,D=void 0,A=e.xAxisDimension.split(",").length>1?"":this.getFormattedName(e.xAxisDimension),D=e.yAxisDimension.split(",").length>1?"":this.getFormattedName(e.yAxisDimension),this.chartOption={legend:{icon:e.legend.icon,width:330,type:"scroll",formatter:function(e){var t=e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}));return t.trim(),t}},tooltip:{trigger:"axis",axisPointer:{type:"cross"},confine:!0},dataZoom:this.showZoomFeature(e.sliderZoom),grid:{left:"10%",top:"20%",right:"10%",bottom:"15%",containLabel:!0},xAxis:{data:this.serviceData[e.listName].map((function(t){return t[e.xAxisDimension]})),type:this.getXAxisType(e),boundaryGap:!1,axisLabel:{interval:0,fontSize:n,rotate:e.xAxisRotateLabels}},yAxis:{type:this.getYAxisType(e),axisLabel:{interval:0,fontSize:n,rotate:e.yAxisRotateLabels}},series:this.seriesData,toolbox:{feature:{dataZoom:{show:e.boxZoom,yAxisIndex:"none"},restore:{},saveAsImage:{}}}},i.isDevMode()&&console.log("Simple bar or line chart for API",this.chartOption));return[2]}}))}))},e.prototype.getXAxisType=function(e){return e.xAxis},e.prototype.getYAxisType=function(e){return e.yAxis},e.prototype.getChartType=function(e){return e.type},e.prototype.getFormattedName=function(e){return e.split(".").slice(-1)[0].replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()})).trim()},e.prototype.getEncodeData=function(e,t,i,a){var o=this;if("polar"===e.type)return[{coordinateSystem:"polar",name:e.xAxisDimension,type:e.layout,showSymbol:!0,encode:{radius:e.yAxisDimension,angle:e.xAxisDimension,tooltip:[e.yAxisDimension,e.xAxisDimension]},label:{show:e.showLabel},color:this.colorsForChart,emphasis:{label:{show:!0}}}];if("scatter"===e.type){if("horizontalScatter"===e.layout){if(1===e.xAxisDimension.split(",").length)return[{type:e.type,symbolSize:e.scatterSymbolSize,datasetId:t,encode:{y:e.yAxisDimension,x:e.xAxisDimension,tooltip:[e.xAxisDimension,e.yAxisDimension]},color:this.getChartItemColor(0)}];var r=e.xAxisDimension.split(","),n=[];return r.forEach((function(i,a){n[a]={type:e.type,symbolSize:e.scatterSymbolSize,datasetId:t,encode:{y:e.yAxisDimension,x:r[a],tooltip:[r[a],e.yAxisDimension]},label:{show:e.showLabel},color:o.getChartItemColor(a),emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})),n}if(1===e.yAxisDimension.split(",").length)return[{type:e.type,symbolSize:e.scatterSymbolSize,datasetId:t,encode:{y:e.yAxisDimension,x:e.xAxisDimension,tooltip:[e.xAxisDimension,e.yAxisDimension]},color:this.getChartItemColor(0),label:{show:e.showLabel},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}];var s=e.yAxisDimension.split(","),l=[];return s.forEach((function(i,a){l[a]={type:e.type,symbolSize:e.scatterSymbolSize,datasetId:t,encode:{y:e.yAxisDimension,x:s[a],tooltip:[s[a],e.yAxisDimension]},color:o.getChartItemColor(a),label:{show:e.showLabel},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})),l}if("radar"===e.type){var c=e.radarDimensions.split(",").reduce((function(e,t){return e[t]=[],e}),{});this.serviceData[e.listName].map((function(e){Object.keys(e).forEach((function(t){c[t]&&c[t].push(e[t])}))}));Object.values(c);var d=Object.keys(c).map((function(e,t){return{name:e,value:c[e],itemStyle:{color:o.getChartItemColor(t)}}}));return[{name:e.listName,type:"radar",data:d}]}if("bar"===e.type&&("simpleBar"===e.layout||"stackedBar"===e.layout)){if(1===e.yAxisDimension.split(",").length)return[{type:e.type,datasetId:t,name:a,encode:{x:i,y:a},color:this.getChartItemColor(0)}];var p=[];return a.array.forEach((function(r,n){p[n]={type:e.type,datasetId:t,stack:o.getStackName(e.stack,a[n]),name:a[n],encode:{x:i,y:a[n]},color:o.getChartItemColor(n)}})),p}if("bar"===e.type&&("simpleHorizontalBar"===e.layout||"stackedHorizontalBar"===e.layout)){if(1===e.xAxisDimension.split(",").length)return[{type:e.type,datasetId:t,name:i,encode:{x:i,y:a},color:this.getChartItemColor(0)}];var h=[];return i.forEach((function(r,n){h[n]={type:e.type,datasetId:t,stack:o.getStackName(e.stack,i[n]),name:i[n],encode:{x:i[n],y:a},color:o.getChartItemColor(n)}})),h}if("line"===e.type){if(1===e.yAxisDimension.split(",").length)return[{type:e.type,datasetId:t,smooth:e.smoothLine,areaStyle:e.area,name:a,encode:{x:i,y:a},color:this.getChartItemColor(0)}];var g=[];return a.forEach((function(r,n){g[n]={type:e.type,datasetId:t,smooth:e.smoothLine,areaStyle:e.area,name:a[n],encode:{x:i,y:a[n]},color:o.getChartItemColor(n)}})),g}if("pie"===e.type){var m=e.radius.split(","),u="",f=void 0;return"roseMode"===e.layout&&(u="rose"),f=void 0===e.pieBorderWidth&&void 0===e.pieBorderRadius?{}:e.pieBorderWidth>0&&void 0===e.pieBorderRadius?{borderColor:"#fff",borderWidth:e.pieBorderWidth}:void 0===e.pieBorderWidth&&e.pieBorderRadius>0?{borderRadius:e.pieBorderRadius}:{borderRadius:e.pieBorderRadius,borderColor:"#fff",borderWidth:e.pieBorderWidth},[{type:e.type,datasetId:t,radius:m,roseType:u,avoidLabelOverlap:!1,label:{show:!1,position:"center"},labelLine:{show:!1},itemStyle:f,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},name:e.pieSliceName,encode:{itemName:[e.pieSlicenName],value:e.pieSliceValue},color:this.colorsForChart}]}},e.prototype.getScatterChartSeriesData=function(e){var t=this;if("horizontalScatter"===e.layout){if(1===e.xAxisDimension.split(",").length)return[{type:e.type,symbolSize:e.scatterSymbolSize,data:this.serviceData[e.listName].map((function(t){return t[e.xAxisDimension]})),itemStyle:{color:this.getChartItemColor(0)},label:{show:e.showLabel},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}];var i=e.xAxisDimension.split(","),a=[];return i.forEach((function(o,r){a[r]={type:e.type,symbolSize:e.scatterSymbolSize,data:t.serviceData[e.listName].map((function(e){return e[i[r]]})),label:{show:e.showLabel},itemStyle:{color:t.getChartItemColor(r)},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})),a}if(1===e.yAxisDimension.split(",").length)return[{type:e.type,symbolSize:e.scatterSymbolSize,data:this.serviceData[e.listName].map((function(t){return t[e.yAxisDimension]})),label:{show:e.showLabel},itemStyle:{color:this.getChartItemColor(0)},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}];var o=e.yAxisDimension.split(","),r=[];return o.forEach((function(i,a){r[a]={type:e.type,symbolSize:e.scatterSymbolSize,data:t.serviceData[e.listName].map((function(e){return e[o[a]]})),label:{show:e.showLabel},itemStyle:{color:t.getChartItemColor(a)},emphasis:{focus:"series",label:{show:!0},itemStyle:{shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}})),r},e.prototype.getPolarChartSeriesData=function(e){var t=[];return this.serviceData[e.listName].map((function(i){var a=[];a.push(i[e.xAxisDimension]),a.push(i[e.yAxisDimension]),t.push(a)})),[{coordinateSystem:"polar",name:e.xAxisDimension,type:e.layout,showSymbol:!0,data:t,label:{show:e.showLabel},itemStyle:{color:this.getChartItemColor(0)},emphasis:{label:{show:!0}}}]},e.prototype.getRadarSeriesData=function(e){var t=this,i=e.radarDimensions.split(","),a=i.reduce((function(e,t){return e[t]=[],e}),{});if(e.listName in this.serviceData)this.serviceData[e.listName].map((function(e){Object.keys(e).forEach((function(t){a[t]&&a[t].push(e[t])}))}));else for(var o=i.map((function(e,i){return{key:e,value:t.serviceData[0].indexOf(e)}})),r=function(e){o.forEach((function(i){a[i.key].push(t.serviceData[e][i.value])}))},n=1;n<this.serviceData.length;n++)r(n);var s=Object.keys(a).map((function(e,t){return{name:e,value:a[e]}}));return e.listName in this.serviceData?[{name:e.listName,type:"radar",color:this.colorsForChart,data:s}]:[{type:"radar",color:this.colorsForChart,data:s}]},e.prototype.createObject=function(e,t,i){var a=i.split(","),o=a.reduce((function(e,t){return e[t]=[],e}),{}),r=a.map((function(t,i){return{key:t,value:e.indexOf(t)}}));t.map((function(e,t){r.keys.forEach((function(t){o[t.key].push(e[t.value])}))}))},e.prototype.getPieChartSeriesData=function(e){var t,i=e.radius.split(","),a="";return"roseMode"===e.layout&&(a="rose"),t=void 0===e.pieBorderWidth&&void 0===e.pieBorderRadius?{}:e.pieBorderWidth>0&&void 0===e.pieBorderRadius?{borderColor:"#fff",borderWidth:e.pieBorderWidth}:void 0===e.pieBorderWidth&&e.pieBorderRadius>0?{borderRadius:e.pieBorderRadius}:{borderRadius:e.pieBorderRadius,borderColor:"#fff",borderWidth:e.pieBorderWidth},[{name:e.listName,type:"pie",radius:i,roseType:a,avoidLabelOverlap:!1,label:{show:!0,position:"center"},labelLine:{show:!1},itemStyle:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},color:this.colorsForChart,data:this.serviceData[e.listName].map((function(t,i){return{value:t[e.pieSliceValue],name:e.pieSliceValue===e.pieSlicenName?e.pieSlicenName:t[e.pieSlicenName]}}))}]},e.prototype.getSeriesData=function(e){var t=this;if(1===e.yAxisDimension.split(",").length)return[{name:this.getFormattedName(e.yAxisDimension),data:this.serviceData[e.listName].map((function(t){return t[e.yAxisDimension]})),type:e.type,smooth:e.smoothLine,areaStyle:e.area,itemStyle:{color:this.getChartItemColor(0)}}];var i=e.yAxisDimension.split(","),a=[];return i.forEach((function(o,r){t.getStackName(e.stackList,i[r]);a[r]={name:i[r],stack:t.getStackName(e.stackList,i[r]),emphasis:{focus:"series"},data:t.serviceData[e.listName].map((function(e){return e[i[r]]})),type:e.type,smooth:e.smoothLine,areaStyle:e.area,itemStyle:{color:t.getChartItemColor(r)}}})),a},e.prototype.getChartItemColor=function(e){return void 0===this.colorsForChart[e]?"":this.colorsForChart[e]},e.prototype.getDatasetDimensions=function(e){var t,i,a=[];return 1===e.yAxisDimension.split(",").length?(t=e.yAxisDimension,a.push(t)):a=v(a,t=e.yAxisDimension.split(",")),1===e.xAxisDimension.split(",").length?(i=e.xAxisDimension,a.push(i)):a=v(a,i=e.xAxisDimension.split(",")),a},e.prototype.getStackName=function(e,t){var i="";return e.forEach((function(a,o){var r=e[o].stackValues.split(",");r.forEach((function(a,n){r[n]===t&&(i=e[o].stackName)}))})),i},e.prototype.getResultDimesions=function(e,t){var i=e.map((function(e){return{from:e.aggrDimesnion,method:e.aggrMethod}}));return i.push({from:t}),i},e.prototype.showZoomFeature=function(e){return e?[{type:"inside",xAxisIndex:0,minSpan:5},{type:"slider",xAxisIndex:0,minSpan:5,show:!0,height:20,top:"90%"}]:[]},e.prototype.hexToRgb=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,a){return t+t+i+i+a+a}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?"rgba("+parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16)+", 0.8)":null},e.prototype.getHorizontalSeriesData=function(e){var t=this;if(1===e.xAxisDimension.split(",").length)return[{name:this.getFormattedName(e.xAxisDimension),data:this.serviceData[e.listName].map((function(t){return b(e.xAxisDimension,t)})),itemStyle:{color:this.getChartItemColor(0)},label:{show:e.showLabel},emphasis:{focus:"series",label:{show:!0}},type:e.type,smooth:e.smoothLine,areaStyle:e.area}];var i=e.xAxisDimension.split(","),a=[];return i.forEach((function(o,r){a[r]={name:i[r],stack:t.getStackName(e.stack,i[r]),label:{show:e.showLabel},emphasis:{label:{show:!0}},data:t.serviceData[e.listName].map((function(e){return b(i[r],e)})),itemStyle:{color:t.getChartItemColor(r)},type:e.type,smooth:e.smoothLine,areaStyle:e.area}})),a},e.prototype.onResized=function(e){this.width=e.newWidth,this.height=e.newHeight,this.dataChart.resize({width:this.width,height:this.height})},e}();A.decorators=[{type:i.Component,args:[{selector:"lib-gp-smart-echart-widget",template:'\r\n<div (resized)="onResized($event)" style="height:100%;width:100%;">\r\n   \r\n        <div echarts [options]="chartOption" class="demo-chart" #chartBox\r\n        [style.height.px]="height" [style.width.px]="width"\r\n        ></div>\r\n   \r\n</div>',styles:["gp-smart-echart-widget.component.css"]}]}],A.ctorParameters=function(){return[{type:m},{type:r.FetchClient}]},A.propDecorators={mapDivRef:[{type:i.ViewChild,args:["chartBox",{static:!0}]}],config:[{type:i.Input}]};var D=function(){},S=function(){},C={chartType:[{id:"bar",value:"Bar Chart"},{id:"line",value:"Line Chart"},{id:"pie",value:"Pie Chart"},{id:"radar",value:"Radar Chart"},{id:"polar",value:"Polar chart"},{id:"scatter",value:"Scatter Chart"}],chartLayout:[{id:"line",layout:[{id:"simple",value:"Simple Line Chart"},{id:"stacked",value:"Stacked Line Chart"}]},{id:"polar",layout:[{id:"line",value:"Line"},{id:"bar",value:"Bar"}]},{id:"bar",layout:[{id:"simpleBar",value:"Simple Bar Chart"},{id:"stackedBar",value:"Stacked Bar Chart"},{id:"simpleHorizontalBar",value:"Simple Horizontal Bar Chart"},{id:"stackedHorizontalBar",value:"Stacked Horizontal Bar Chart"}]},{id:"pie",layout:[{id:"simplePie",value:"Simple Pie Chart"},{id:"roseMode",value:"Rose Chart"}]},{id:"scatter",layout:[{id:"simpleScatter",value:"Simple Scatter Chart"},{id:"horizontalScatter",value:"Horizontal Scatter Chart"}]}],yAxisType:[{id:"value",value:"Value",disabled:!1},{id:"category",value:"Category",disabled:!1},{id:"time",value:"Time",disabled:!1}],xAxisType:[{id:"value",value:"Value",disabled:!1},{id:"category",value:"Category",disabled:!1},{id:"time",value:"Time",disabled:!1}],legendType:[{icon:"circle",value:"Circle"},{icon:"rect",value:"Rectangle"},{icon:"roundRect",value:"Round Rectangle"},{icon:"triangle",value:"Triangle"},{icon:"diamond",value:"Diamond"},{icon:"arrow",value:"Arrow"}],aggregateMethod:[{id:"sum",value:"Sum"},{id:"count",value:"Count"},{id:"Q1",value:"Q1"},{id:"median",value:"Q2 / Median"},{id:"Q3",value:"Q3"},{id:"first",value:"First"},{id:"average",value:"Average"},{id:"min",value:"Min"},{id:"max",value:"Max"}],listName:""},w=function(){function e(){this.flag=!1,this.userSelectedColor=[],this.config={listName:"",title:"",pieSlicenName:"",pieSliceValue:"",type:"",layout:"",dataSource:"",dataSourceValue:"",xAxis:"",yAxis:"",smoothLine:!1,apiUrl:"",fontSize:12,xAxisRotateLabels:0,yAxisRotateLabels:0,area:!1,yAxisDimension:"",radarDimensions:"",addStack:!1,showApiInput:!1,stack:[],stackList:D[""],aggrArr:[],aggrList:S[""],legend:{icon:"",width:330,type:"scroll"},radius:[]},this.chartData=C,this.isGroupByInAggregate=!1,this.isAggrAdded=!1,this.configData=new i.EventEmitter}return e.prototype.ngOnInit=function(){this.aggregationMethods=C.aggregateMethod,this.config.aggrList=[],this.config.legend={},null!==this.config.datahubUrl&&void 0!==this.config.datahubUrl||(this.config.datahubUrl="service/datahub/sql?version=v1"),null!==this.config.sqlLimit&&void 0!==this.config.sqlLimit||(this.config.sqlLimit=100),this.onSelection(this.config.type)},e.prototype.stackAdded=function(e){this.config.stackList=[],e?(this.config.stackList.push(new D),this.config.stackList.push(new D)):this.config.stackList.length=0},e.prototype.yAxisDimensionUpdate=function(e){},e.prototype.deleteStackValue=function(e,t){this.config.stackList.splice(t,1)},e.prototype.addAnotherStack=function(){this.config.stackList.push(new D)},e.prototype.addAnotherAggregate=function(){this.isAggrAdded=!0,this.config.aggrList.push(new S)},e.prototype.deleteAggrValue=function(e,t){this.config.aggrList.splice(t,1),0===this.config.aggrList.length&&(this.isAggrAdded=!1)},e.prototype.colorUpdate=function(e){this.userSelectedColor=v(this.userSelectedColor,[e]),this.config.colors=this.userSelectedColor.join(",")},e.prototype.colorUpdateByTyping=function(e){var t=v(this.userSelectedColor,e.split(","));this.userSelectedColor=v(new Set(v(t)))},e.prototype.onSelection=function(e){var t=this;this.chartData.chartLayout.filter((function(i){e===i.id&&(t.chartLayoutData=i.layout)})),this.config.addStack=!1},e.prototype.onLayoutSelection=function(e){var t,i,a,o,r,n,s,l;if("simpleBar"===e||"stackedBar"===e||"simple"===e||"stacked"===e||"simpleScatter"===e){try{for(var c=y(this.chartData.yAxisType),d=c.next();!d.done;d=c.next()){"category"===(x=d.value).id&&(x.disabled=!0)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(i=c.return)&&i.call(c)}finally{if(t)throw t.error}}try{for(var p=y(this.chartData.xAxisType),h=p.next();!h.done;h=p.next()){"category"===(x=h.value).id&&(x.disabled=!1)}}catch(e){a={error:e}}finally{try{h&&!h.done&&(o=p.return)&&o.call(p)}finally{if(a)throw a.error}}}else if("simpleHorizontalBar"===e||"stackedHorizontalBar"===e||"horizontalScatter"===e){try{for(var g=y(this.chartData.yAxisType),m=g.next();!m.done;m=g.next()){"category"===(x=m.value).id&&(x.disabled=!1)}}catch(e){r={error:e}}finally{try{m&&!m.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}try{for(var u=y(this.chartData.xAxisType),f=u.next();!f.done;f=u.next()){var x;"category"===(x=f.value).id&&(x.disabled=!0)}}catch(e){s={error:e}}finally{try{f&&!f.done&&(l=u.return)&&l.call(u)}finally{if(s)throw s.error}}}},e.prototype.dataSourceSelection=function(e){"API"===e?(this.config.showApiInput=!0,this.config.showDatahubInput=!1):"datahub"===e?(this.config.showDatahubInput=!0,this.config.showApiInput=!1):(this.config.showApiInput=!1,this.config.showDatahubInput=!1)},e}();w.decorators=[{type:i.Component,args:[{selector:"lib-smart-chart-config",template:'<div class="configSection">\r\n    <h4 translate>DataSource</h4>\r\n    <div class="row ">\r\n        <div class="col-xs-2 col-md-2">\r\n            <label for="api" title="API URL" class="c8y-radio radio-inline">\r\n                <input type="radio" id="api" name="dataSource" value="API"\r\n                    (change)="dataSourceSelection($event.target.value)" [(ngModel)]="config.dataSource">\r\n                <span></span>\r\n                <span>API URL</span>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-2 col-md-2">\r\n            <label for="datahub" title="DataHub" class="c8y-radio radio-inline">\r\n                <input type="radio" id="datahub" name="dataSource" value="datahub"\r\n                    (change)="dataSourceSelection($event.target.value)" [(ngModel)]="config.dataSource"\r\n                    placeholder="Enter Relative URL">\r\n                <span></span>\r\n                <span>DataHub</span>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-2 col-md-2"></div>\r\n        <div class="col-xs-4 col-md-4 ">\r\n            <label for="listname">List Name</label>\r\n            <input type="text" class="form-control" name="listname" [(ngModel)]="config.listName">\r\n        </div>\r\n    </div>\r\n    \x3c!-- ENd of DataSource Radio Button Selection --\x3e\r\n    <div class="row">\r\n        <ng-container *ngIf="config.showApiInput">\r\n            <div class="col-xs-6 col-md-6">\r\n                <input class="form-control" type="text" placeholder="API URL" [(ngModel)]="config.apiUrl">\r\n            </div>\r\n        </ng-container>\r\n        <ng-container *ngIf="config.showDatahubInput">\r\n            <div class="col-xs-6 col-md-6">\r\n                <input class="form-control" type="text" placeholder="Datahub URL" [(ngModel)]="config.datahubUrl">\r\n                <div>\r\n                    <textarea class="form-control" placeholder="Sql Query" rows="3" cols="30"\r\n                        [(ngModel)]="config.sqlQuery">\r\n                    </textarea>\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-6 col-md-6">\r\n                <label for="sqlLimit">Sql Result Limit</label>\r\n                <div>\r\n                    <input name="sqlLimit" [(ngModel)]="config.sqlLimit" type="number" min="100" max="20000" step="1" />\r\n                </div>\r\n            </div>\r\n\r\n        </ng-container>\r\n    </div>\r\n</div>\r\n<div class="configSection">\r\n    <h4 translate>Chart Config</h4>\r\n    <div class="row ">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="type">Chart Type</label>\r\n            <div class="c8y-select-wrapper">\r\n                <select id="selectExample" class="form-control" name="type" (change)="onSelection($event.target.value)"\r\n                    [(ngModel)]="config.type">\r\n                    <option *ngFor="let chartType of chartData.chartType" value="{{chartType.id}}">\r\n                        {{chartType.value}}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        \x3c!-- dont show div if config.type is scatter or radar --\x3e\r\n        <div *ngIf=" config.type!==\'radar\'" class="col-xs-3 col-md-3">\r\n            <label for="layout">Chart Layout</label>\r\n            <div class="c8y-select-wrapper">\r\n                <select name="layout" id="selectExample" class="form-control" [(ngModel)]="config.layout"\r\n                    (change)="onLayoutSelection($event.target.value)">\r\n                    <option *ngFor="let chartLayout of chartLayoutData" value="{{chartLayout.id}}">\r\n                        {{chartLayout.value}}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3" *ngIf="config.type!==\'pie\' && config.type!==\'radar\' && config.type!==\'polar\'">\r\n            <label for="fontSize">Font Size</label>\r\n            <div>\r\n                <output>{{config.fontSize}}</output>\r\n                <input name="fontSize" [(ngModel)]="config.fontSize" type="range" min="8" max="20" step="1" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="row " *ngIf="config.type==\'pie\'">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="listname">PieSliceValue</label>\r\n            <input type="text" class="form-control" name="listname" [(ngModel)]="config.pieSliceValue">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="listname">PieSliceName</label>\r\n            <input type="text" class="form-control" name="listname" [(ngModel)]="config.pieSlicenName">\r\n        </div>\r\n    </div>\r\n    <div class="row " *ngIf="config.type===\'polar\'">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="xAxisDimension">X-Axis Dimension</label>\r\n            <input class="form-control" name="url" type="text" [(ngModel)]="config.xAxisDimension">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="yAxisDimension">Y-Axis Dimension</label>\r\n            <input class="form-control" name="yAxisDimension" type="text" [(ngModel)]="config.yAxisDimension"\r\n                (change)="yAxisDimensionUpdate(config.yAxisDimension)">\r\n        </div>\r\n    </div>\r\n    <div class="row " *ngIf="config.type!==\'pie\' && config.type!==\'polar\'">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="xAxisType">X-Axis Type</label>\r\n            <div class="c8y-select-wrapper">\r\n                <select id="selectExample" class="form-control" name="xAxisType" [(ngModel)]="config.xAxis">\r\n                    <option *ngFor="let type of chartData.xAxisType" value="{{type.id}}" [disabled]=\'type.disabled\'>\r\n                        {{type.value}}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="xAxisDimension">X-Axis Dimension</label>\r\n            <input class="form-control" name="url" type="text" [(ngModel)]="config.xAxisDimension">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3" *ngIf="config.type!==\'pie\' && config.type!==\'radar\' && config.type!==\'polar\'">\r\n            <label for="xrotateLabels">X-Axis Rotate Labels</label>\r\n            <div>\r\n                <output>{{config.xAxisRotateLabels}}</output>\r\n                <input name="xrotateLabels" [(ngModel)]="config.xAxisRotateLabels" type="range" min="-90" max="90"\r\n                    step="1" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- End of X axis Config --\x3e\r\n    <div class="row " *ngIf="config.type!==\'pie\' && config.type!==\'radar\' && config.type!==\'polar\'">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="yAxisType">Y-Axis Type</label>\r\n            <div class="c8y-select-wrapper">\r\n                <select id="selectExample" class="form-control" name="yAxisType" [(ngModel)]="config.yAxis">\r\n                    <option *ngFor="let type of chartData.yAxisType" value="{{type.id}}" [disabled]=\'type.disabled\'>\r\n                        {{type.value}}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="yAxisDimension">Y-Axis Dimension</label>\r\n            <input class="form-control" name="yAxisDimension" type="text" [(ngModel)]="config.yAxisDimension"\r\n                (change)="yAxisDimensionUpdate(config.yAxisDimension)">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3" *ngIf="config.type!==\'pie\' && config.type!==\'radar\' && config.type!==\'polar\'">\r\n            <label for="yrotateLabels">Y-Axis Rotate Labels</label>\r\n            <div>\r\n                <output>{{config.yAxisRotateLabels}}</output>\r\n                <input name="yrotateLabels" [(ngModel)]="config.yAxisRotateLabels" type="range" min="-90" max="90"\r\n                    step="1" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \x3c!-- End of y axis Config --\x3e\r\n    \x3c!-- Start of Radar config --\x3e\r\n    <div class="row" *ngIf="config.type==\'radar\'">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="radarDimensions">Radar Dimensions</label>\r\n            <input class="form-control" name="radarDimensions" type="text" [(ngModel)]="config.radarDimensions">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="RadarRadius">Radar Chart radius</label>\r\n            <input class="form-control" name="RadarRadius" type="text" [(ngModel)]="config.radarChartRadius">\r\n        </div>\r\n    </div>\r\n    \x3c!-- End of Radar config --\x3e\r\n</div>\r\n\x3c!-- End of General Chart Config Section --\x3e\r\n\x3c!-- Pie Chart Config Section --\x3e\r\n<div class="configSection" *ngIf="config.type==\'pie\'">\r\n    <h4 translate>Pie Chart Settings</h4>\r\n    <div class="row form-group">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="radius">Pie Radius</label>\r\n            <input class="form-control" name="radius" type="text" placeholder="0%,100%" [(ngModel)]="config.radius">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="pieBorderRadius">Border Radius</label>\r\n            <input class="form-control" name="pieBorderRadius" type="number" min=\'0\' max=\'30\' placeholder="0" value="0"\r\n                [(ngModel)]="config.pieBorderRadius">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="pieBorderWidth">Border Width</label>\r\n            <input class="form-control" name="pieBorderWidth" type="number" min=\'0\' max=\'30\' placeholder="0" value="0"\r\n                [(ngModel)]="config.pieBorderWidth">\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- End of Pie Chart Config Section --\x3e\r\n\x3c!-- Scatter Chart Config --\x3e\r\n<div class="configSection" *ngIf="config.type===\'scatter\'">\r\n    <h4 translate>Scatter Chart Settings</h4>\r\n    <div class="row form-group">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label title="Bubble Size" for="symbolSize">Bubble Size</label>\r\n            <input class="form-control" name="symbolSize" type="number" placeholder="Enter a number"\r\n                [(ngModel)]="config.scatterSymbolSize" min="5" max="20">\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- End of Scatter Chart Config --\x3e\r\n\x3c!-- Stack Chart Config --\x3e\r\n<div class="configSection" *ngIf="config.layout===\'stacked\' || config.layout===\'stackedBar\'">\r\n    <h4 translate>Stack Config</h4>\r\n    <div class="row form-group">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label class="c8y-checkbox checkbox-inline" title="addStack">\r\n                <input type="checkbox" value="Add Stack" [(ngModel)]="config.addStack"\r\n                    (click)="stackAdded($event.target.checked)">\r\n                <span></span>\r\n                <span>Add Stack</span>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <div *ngIf="config.addStack" class="col-xs-2 col-md-2">\r\n                <button type="button" class="btn btn-primary btn-xs" (click)="addAnotherStack()">Add\r\n                    Another Stack</button>\r\n            </div>\r\n        </div>\r\n        <div *ngIf="config.addStack">\r\n            <ng-container *ngFor="let item of config.stackList;let i = index">\r\n                <div class="row col-xs-12 col-md-12 col-lg-12" style="margin-top: 5px;">\r\n                    <div class="col-md-2 col-xs-2">\r\n                        <label for="stackName">Stack Name</label>\r\n                    </div>\r\n                    <div class="col-md-2 col-xs-2">\r\n                        <input class="form-control" name="stackName" type="text"\r\n                            [(ngModel)]="config.stackList[i].stackName">\r\n                    </div>\r\n                    <div class="col-md-2 col-xs-2">\r\n                        <label for="stackValues">Stack Values</label>\r\n                    </div>\r\n                    <div class="col-md-2 col-xs-2">\r\n                        <input class="form-control" name="stackValues" type="text"\r\n                            [(ngModel)]="config.stackList[i].stackValues">\r\n                    </div>\r\n                    <div class="col-md-2 col-xs-2">\r\n                        <button class="btn btn-primary btn-xs btn-danger" (click)="deleteStackValue($event,i)">Delete\r\n                            Stack</button>\r\n                    </div>\r\n                </div>\r\n            </ng-container>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- End of Scatter Chart Config --\x3e\r\n\x3c!-- Line Chart Config Section --\x3e\r\n<div class="configSection" *ngIf="config.type==\'line\'">\r\n    <h4 translate>Line Chart Settings</h4>\r\n    <div class="row form-group">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label title="Area Opacity" for="lineAreaOpacity">Area Opacity</label>\r\n            <input class="form-control" type="number" name="lineAreaOpacity" [(ngModel)]="config.areaOpacity" min="0"\r\n                max="1" step="0.1">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <br />\r\n            <label title="Area" class="c8y-checkbox" style="height: 35px;">\r\n                <input type="checkbox" value="true" [(ngModel)]="config.area">\r\n                <span></span>\r\n                <span>Area</span>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <br />\r\n            <label title="Smooth Line" class="c8y-checkbox" style="height: 35px;">\r\n                <input type="checkbox" value="true" [(ngModel)]="config.smoothLine">\r\n                <span></span>\r\n                <span>Smooth Line</span>\r\n            </label>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\x3c!-- End of Line Chart Config Section --\x3e\r\n\x3c!-- Aggregate Section --\x3e\r\n<div class="configSection" *ngIf="config.type!==\'radar\'">\r\n    \x3c!-- *ngIf="config.type===\'pie\'||config.type===\'bar\'||config.type===\'line\' ||config.type===\'polar\' || config.type===\'scatter\' "> --\x3e\r\n    <h4 translate>Aggregate Config</h4>\r\n    <div class="col-xs-3 col-md-3">\r\n        <label for="aggregation">Aggregate Method</label>\r\n        <button style="margin-left: 10px;" type="button" class="btn btn-primary btn-xs" (click)="addAnotherAggregate()">+</button>\r\n    </div>\r\n    <div class="col-xs-12 col-md-12 col-lg-12">\r\n        <ng-container *ngFor="let item of config.aggrList;let i = index">\r\n            <div class="row col-xs-12 col-md-12 col-lg-12">\r\n                <div class="col-xs-1 col-md-1">\r\n                    <label for="aggregateDimension">Dimension </label>\r\n                </div>\r\n                <div class="col-xs-2 col-md-2">\r\n                    <input class="form-control" name="aggregateDimension" type="text"\r\n                        [ngClass]="{\'alertInput\': isGroupByInAggregate === true}"\r\n                        [(ngModel)]="config.aggrList[i].aggrDimesnion">\r\n                </div>\r\n                <div class="col-xs-1 col-md-1">\r\n                    <label for="aggregation">Method</label>\r\n                </div>\r\n                <div class="col-xs-2 col-md-2">\r\n                    <select name="aggregation" id="selectMethod" class="form-control"\r\n                        [(ngModel)]="config.aggrList[i].aggrMethod">\r\n                        <option *ngFor="let method of aggregationMethods" value="{{method.id}}">{{method.value}}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class="col-xs-2 col-md-2 ">\r\n                    <button class="btn btn-primary btn-xs btn-danger" (click)="deleteAggrValue($event,i)">-</button>\r\n                </div>\r\n            </div>\r\n        </ng-container>\r\n        <div class="form-group col-xs-12 col-md-12 col-lg-12 row" *ngIf="isAggrAdded">\r\n            <div class="col-xs-1 col-md-1">\r\n                <label for="groupByDimension">GroupBy</label>\r\n            </div>\r\n            <div class="col-xs-2 col-md-2">\r\n                <input class="form-control" name="groupByDimension" type="text" [(ngModel)]="config.groupBy">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- End of Aggregate Section --\x3e\r\n\x3c!-- Legend Config Section --\x3e\r\n<div class="configSection">\r\n    <h4>Appearance Config</h4>\r\n    <div class="row">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label for="legend">Legend Shape</label>\r\n            <div class="c8y-select-wrapper">\r\n                <select name="legend" id="LegendSelect" class="form-control" [(ngModel)]="config.legend.icon">\r\n                    <option *ngFor="let legendType of chartData.legendType" value="{{legendType.icon}}">\r\n                        {{legendType.value}}\r\n                    </option>\r\n                </select>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3" *ngIf="config.type===\'line\'  || config.type===\'scatter\'  || config.type===\'bar\'">\r\n            <br />\r\n            <label title="Slider Zoom" class="c8y-checkbox" style="height: 35px;">\r\n                <input type="checkbox" value="false" [(ngModel)]="config.sliderZoom">\r\n                <span></span>\r\n                <span>Slider Zoom</span>\r\n            </label>\r\n        </div>\r\n        <div class="col-xs-3 col-md-3" *ngIf="config.type===\'line\'  || config.type===\'scatter\'  || config.type===\'bar\'">\r\n            <br />\r\n            <label title="Box Zoom" class="c8y-checkbox" style="height: 35px;">\r\n                <input type="checkbox" value="false" [(ngModel)]="config.boxZoom">\r\n                <span></span>\r\n                <span>Box Zoom</span>\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="row">\r\n        <div class="col-xs-3 col-md-3">\r\n            <label title="Chart Color" for="chartColor">Chart Color</label>\r\n            <input type="text" name="chartColor" [(ngModel)]="config.colors"\r\n                (change)="colorUpdateByTyping($event.target.value)">\r\n        </div>\r\n        <div class="col-xs-3 col-md-3">\r\n            <br />\r\n            <input class="form-control" type="color" placeholder="Enter color HEX"\r\n                (change)="colorUpdate($event.target.value)">\r\n        </div>\r\n    </div>\r\n</div>\r\n\x3c!-- End Of Legend Config Section --\x3e',styles:[".alertInput{border:2px solid red}.configSection{display:grid;border:1px solid rgba(0,0,0,.3);border-radius:4px;margin:.25em;padding:.25em}.row{padding:.5em}"]}]}],w.ctorParameters=function(){return[]},w.propDecorators={config:[{type:i.Input}],configData:[{type:i.Output}]};var L={id:"smart.echart",label:"Smart eChart",description:"linechart derived from api data",previewImage:"",component:A,configComponent:w,data:{ng1:{options:{noDeviceTarget:!1,noNewWidgets:!1,deviceTargetNotRequired:!0,groupsSelectable:!0}}}},I=function(){};I.decorators=[{type:i.NgModule,args:[{declarations:[A,w],imports:[n.CoreModule,s.NgxEchartsModule.forRoot({echarts:h}),l.AngularResizedEventModule],schemas:[i.CUSTOM_ELEMENTS_SCHEMA],providers:[m,{provide:n.HOOK_COMPONENTS,multi:!0,useValue:L}],exports:[A,w],entryComponents:[A,w]}]}],e.GpSmartEchartWidgetComponent=A,e.GpSmartEchartWidgetModule=I,e.GpSmartEchartWidgetService=m,e["ɵ0"]=L,e["ɵa"]=w,e["ɵb"]="",Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=custom-widget.umd.min.js.map